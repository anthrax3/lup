(function(h,e){"object"===typeof exports?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(h)})(this,function(h){function e(a){var b=this;this._targetElement=a;this._classNames=[];this._options={cleanup:!0};this._ops=[];this._executedOps=0;this._transitionNames={"":"transitionEnd",O:"otransitionend",ms:"msTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"};this._supportAnimation=!1;this._propertyPrefix="";this._lastWait=0;a=["Webkit","Moz","O","ms","Khtml"];var c=
document.querySelector("html");if(c.style.animationName)this._supportAnimation=!0;else for(var d=0,e=a.length;d<e;d++)if(void 0!==c.style[a[d]+"AnimationName"]){this._propertyPrefix=a[d];this._supportAnimation=!0;break}this._targetElement.addEventListener(this._transitionNames[this._propertyPrefix],function(){"function"==typeof b._thenFn&&(b._thenFn.call(b),b._thenFn=null,b._executedOps++)},!1)}function j(a){var b=[].slice.apply(arguments).slice(1,arguments.length);this._ops.push({fn:a,wait:this._lastWait||
null,args:b});this._lastWait=null}function l(a){this._classNames.push(a);this._targetElement.className+=" "+a;f.call(this)}function k(a){var b=this._classNames.indexOf(a);-1<b&&this._classNames.splice(b,1);this._targetElement.className=this._targetElement.className.replace(RegExp(a,"g"),"").trim()}function m(a){"undefined"!=typeof a?k.call(this,a):(a=this._classNames[this._classNames.length-1],"undefined"!=typeof a&&k.call(this,a));f.call(this)}function n(a){var b=this,c=1E3*parseFloat(getComputedStyle(this._targetElement).transitionDuration);
0==c||0<this._currentOp.wait&&this._currentOp.wait>c?("function"==typeof a&&a.call(b),f.call(this)):this._thenFn=function(){"function"==typeof a&&a.call(b);f.call(b)}}function f(){var a=this;if(1>this._ops.length){if("function"==typeof this._endFn&&this._endFn.call(this),!0===this._options.cleanup&&0<this._classNames.length)for(var b=0;b<=this._classNames.length;b++)k.call(this,this._classNames[0])}else{var c=this._ops[0];setTimeout(function(){c.fn.apply(a,c.args);"_then"!=c.fn.name&&a._executedOps++},
c.wait||0);this._currentOp=c;this._ops.splice(0,1)}}var g=function(a){var b=null;if("string"===typeof a)b=document.querySelector(a);else if("object"===typeof a)b=a;else throw Error("lup: Given target element is not valid.");if(null!=b)return new e(b);throw Error("lup: Target element is null.");};g.version="0.1.0";g.fn=e.prototype={clone:function(){return new g(this)},option:function(a,b){this._options[a]=b;return this},options:function(a){var b=this._options,c={},d;for(d in b)c[d]=b[d];for(d in a)c[d]=
a[d];this._options=c;return this},add:function(a){j.call(this,l,a);return this},remove:function(a){j.call(this,m,a);return this},then:function(a){j.call(this,n,a);return this},wait:function(a){this._lastWait=a;return this},end:function(a){"undefined"!=typeof a&&(this._endFn=a);f.call(this);return this}};return h.lup=g});
