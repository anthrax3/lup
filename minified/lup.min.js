(function(e,c){"object"===typeof exports?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):c(e)})(this,function(e){function c(a){var b=this;this._targetElement=a;this._classNames=[];this._options={cleanup:!0};this._ops=[];this._transitionEnds=[];this._executedOps=0;this._transitionNames={"":"transitionEnd",O:"otransitionend",ms:"msTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"};this._supportAnimation=!1;this._propertyPrefix="";this._lastWait=0;a=["Webkit","Moz",
"O","ms","Khtml"];var j=document.querySelector("html");if(j.style.animationName)this._supportAnimation=!0;else for(var c=0,d=a.length;c<d;c++)if(void 0!==j.style[a[c]+"AnimationName"]){this._propertyPrefix=a[c];this._supportAnimation=!0;break}this._targetElement.addEventListener(this._transitionNames[this._propertyPrefix],function(){b._transitionEnds.push({opCount:b._executedOps});"undefined"!=typeof b._thenFn&&null!=b._thenFn&&(b._thenFn.call(b),b._thenFn=null,b._executedOps++)},!1)}function f(a){var b=
[].slice.apply(arguments).slice(1,arguments.length);this._ops.push({fn:a,wait:this._lastWait||null,args:b});this._lastWait=null}function k(a){this._classNames.push(a);this._targetElement.className+=" "+a;d.call(this)}function g(a){var b=this._classNames.indexOf(a);-1<b&&this._classNames.splice(b,1);this._targetElement.className=this._targetElement.className.replace(RegExp(a,"g"),"").trim()}function l(a){"undefined"!=typeof a?g.call(this,a):(a=this._classNames[this._classNames.length-1],"undefined"!=
typeof a&&g.call(this,a));d.call(this)}function m(a){var b=this,c=1E3*parseFloat(getComputedStyle(this._targetElement).transitionDuration);0==c||0<this._currentOp.wait&&this._currentOp.wait>c?(d.call(this),"undefined"!=typeof a&&a.call(b)):this._thenFn=function(){d.call(b);"undefined"!=typeof a&&a.call(b)}}function d(){var a=this;if(1>this._ops.length){if(!0===this._options.cleanup&&0<this._classNames.length)for(var b=0;b<=this._classNames.length;b++)g.call(this,this._classNames[0])}else{var c=this._ops[0];
setTimeout(function(){c.fn.apply(a,c.args);"_then"!=c.fn.name&&a._executedOps++},c.wait||0);this._currentOp=c;this._ops.splice(0,1)}}var h=function(a){var b=null;if("string"===typeof a)b=document.querySelector(a);else if("object"===typeof a)b=a;else throw Error("lup: Given target element is not valid.");if(null!=b)return new c(b);throw Error("lup: Target element is null.");};h.version="0.1.0";h.fn=c.prototype={add:function(a){f.call(this,k,a);return this},remove:function(a){f.call(this,l,a);return this},
then:function(a){f.call(this,m,a);return this},wait:function(a){this._lastWait=a;return this},end:function(a){"undefined"!=typeof a&&(this._options.cleanup=!!a);d.call(this);return this}};return e.lup=h});
